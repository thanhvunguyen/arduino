<div class="container-fluid">
    <!-- Title -->
    <div class="row heading-bg heading-sm">
        <div class="col-xs-12">
            <h5 class="txt-dark"></h5>
        </div>
    </div>
    <!-- /Title -->
    <div class="row" id="myCanvas">

    </div>
</div>

<!--{content_for name="headjs"}-->
<script type="text/javascript" src="/assets/js/Chart.min.js"></script>

<script>
    $(document).ready(function() {
        $.ajax({
            url : "/api/sensor/get_list",
            type : "GET",
            success : function(data) {
                console.log(data);

                $.each(data.result, function(key, value) {

                    let myChartKey = 'myChart' + key;

                    $('#myCanvas').append(
                        '<div class="col-sm-3">'
                        + '<canvas id="' + myChartKey + '"' + ' width="100" height="100"></canvas>'
                        + '</div>'
                    );

                    let temp = [];
                    let humi = [];

                    for (let i in data.result[key]) {
                        temp.push(data.result[key][i].sensor_temp);
                        humi.push(data.result[key][i].sensor_humi);
                    }

                    let chartdata = {
                        labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24],
                        datasets: [
                            {
                                label: 'Temp',
                                borderColor: '#46d5f1',
                                hoverBorderColor: '#666666',
                                data: temp,
                                lineTension: 0,
                                spanGaps: true
                            },
                            {
                                label: 'Humi',
                                borderColor: '#FF0000',
                                hoverBorderColor: '#666666',
                                data: humi,
                                lineTension: 0,
                                spanGaps: true
                            }
                        ]
                    };

                    let options = {
                        responsive: true,
                        title: {
                            display: true,
                            position: 'top',
                            text: key.slice(-2),
                            fontColor: "#FFF"
                        },
                        scales: {
                            yAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Temp / Humi'
                                }
                            }],
                            xAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Hour(s)'
                                }
                            }]
                        },
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                boxWidth: 80,
                                fontColor: '#FFF'
                            }
                        }
                    };

                    let graphTarget = $("#" + myChartKey);

                    new Chart(graphTarget, {
                        type: 'line',
                        data: chartdata,
                        options: options
                    });
                });

            },
            error : function(data) {
                console.log(data);
            }
        });
    });
</script>
<!--{/content_for}-->